# Migration `20200715021809`

This migration has been generated by Yuri Yakovlev at 7/15/2020, 2:18:09 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TYPE "UserRole" ADD VALUE 'MODERATOR'

ALTER TABLE "public"."Argument" DROP CONSTRAINT "Argument_battleId_fkey"

ALTER TABLE "public"."Argument" DROP CONSTRAINT "Argument_userId_fkey"

ALTER TABLE "public"."Comment" DROP CONSTRAINT "Comment_argumentId_fkey"

CREATE TABLE "public"."Standpoint" (
"battleId" text  NOT NULL ,
"id" text  NOT NULL ,
"side" "Side" NOT NULL ,
"text" text  NOT NULL ,
"userId" text  NOT NULL ,
    PRIMARY KEY ("id"))

ALTER TABLE "public"."Comment" DROP COLUMN "argumentId",
ADD COLUMN "standpointId" text   ;

ALTER TABLE "public"."Standpoint" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Standpoint" ADD FOREIGN KEY ("battleId")REFERENCES "public"."Battle"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("standpointId")REFERENCES "public"."Standpoint"("id") ON DELETE SET NULL  ON UPDATE CASCADE

DROP TABLE "public"."Argument";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200711041320..20200715021809
--- datamodel.dml
+++ datamodel.dml
@@ -3,17 +3,17 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Battle {
   id          String     @id @default(cuid())
   description String
   sideA       String
   sideB       String
-  arguments   Argument[]
+  standpoints   Standpoint[]
   User   User   @relation(fields: [userId], references: [id])
   userId String
 }
@@ -24,15 +24,15 @@
   email     String     @unique
   password  String
   fullName  String
   battles   Battle[]
-  arguments Argument[]
+  standpoints Standpoint[]
   comments  Comment[]
   role UserRole @default(USER)
 }
-model Argument {
+model Standpoint {
   id       String    @id @default(uuid())
   text     String
   side     Side
   comments Comment[]
@@ -48,14 +48,15 @@
   text String
   User       User      @relation(fields: [userId], references: [id])
   userId     String
-  Argument   Argument? @relation(fields: [argumentId], references: [id])
-  argumentId String?
+  Standpoint   Standpoint? @relation(fields: [standpointId], references: [id])
+  standpointId String?
 }
 enum UserRole {
   USER
+  MODERATOR
   ADMIN
 }
 enum Side {
```


