# Migration `20200704204346`

This migration has been generated by Yuri Yakovlev at 7/4/2020, 8:43:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Battle" (
"description" text  NOT NULL ,"id" text  NOT NULL ,"userId" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"email" text  NOT NULL ,"fullName" text  NOT NULL ,"id" text  NOT NULL ,"password" text  NOT NULL ,"userName" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.userName" ON "public"."User"("userName")

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

ALTER TABLE "public"."Battle" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200704204346
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,25 @@
+generator prisma_client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model Battle {
+  id          String @id @default(cuid())
+  description String
+
+  User   User?   @relation(fields: [userId], references: [id])
+  userId String?
+}
+
+model User {
+  id       String   @id @default(cuid())
+  userName String   @unique
+  email    String   @unique
+  password String
+  fullName String
+  battles  Battle[]
+}
```


